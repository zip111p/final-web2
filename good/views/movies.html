<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Movie Library - Manage Your Collection</title>
    <link rel="stylesheet" href="/style.css">
</head>

<body>
    <header class="hero">
        <h1>Movie Library</h1>
        <p class="subtitle">Manage and organize your favorite movies</p>
        <nav style="margin-top: 20px;">
            <a href="/">Home</a> •
            <a href="/movies">Movies</a> •
            <a href="/about">About</a> •
            <a href="/contact">Contact</a>
        </nav>
        <div id="userNav" class="auth-nav"></div>
    </header>

    <main class="container">
        <!-- User Welcome Section -->
        <div id="loginPrompt" class="login-prompt" style="display: none;">
            <p><strong>Please log in to manage your movie collection</strong></p>
            <a href="/login" class="btn btn-primary">Login</a> or 
            <a href="/register" class="btn btn-secondary">Create Account</a>
        </div>

        <div id="userWelcome" class="user-welcome" style="display: none;">
            <p>Welcome, <strong id="username"></strong></p>
            <button id="logoutBtn" class="logout-btn" onclick="logout()">Logout</button>
        </div>

        <!-- Add Movie Form (Protected) -->
        <section id="addMovieSection" style="display: none;">
            <h2>Add New Movie</h2>
            <form id="movieForm" class="movie-form">
                <div class="form-group">
                    <label for="title">Title *</label>
                    <input type="text" id="title" placeholder="Movie title" required>
                </div>

                <div class="form-group">
                    <label for="genre">Genre *</label>
                    <select id="genre" required>
                        <option value="">Select Genre</option>
                        <option value="Action">Action</option>
                        <option value="Drama">Drama</option>
                        <option value="Sci-Fi">Sci-Fi</option>
                        <option value="Crime">Crime</option>
                        <option value="Thriller">Thriller</option>
                        <option value="Fantasy">Fantasy</option>
                        <option value="Animation">Animation</option>
                        <option value="Adventure">Adventure</option>
                        <option value="Horror">Horror</option>
                        <option value="Mystery">Mystery</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="release_year">Release Year *</label>
                    <input type="number" id="release_year" placeholder="e.g., 2024" min="1900" max="2100" required>
                </div>

                <div class="form-group">
                    <label for="director">Director *</label>
                    <input type="text" id="director" placeholder="Director name" required>
                </div>

                <div class="form-group">
                    <label for="rating">Rating (0-10) *</label>
                    <input type="number" id="rating" placeholder="e.g., 8.5" min="0" max="10" step="0.1" required>
                </div>

                <div class="form-group">
                    <label for="duration">Duration (minutes) *</label>
                    <input type="number" id="duration" placeholder="e.g., 120" min="1" required>
                </div>

                <div class="form-group full-width">
                    <label for="description">Description *</label>
                    <textarea id="description" placeholder="Movie description" required></textarea>
                </div>

                <button type="submit" class="btn btn-success">Add Movie</button>
            </form>
        </section>

        <!-- Movies Display Section -->
        <section class="movies-section">
            <h2>Movie Collection</h2>
            <p id="movieCount" class="movie-count"></p>

            <div class="table-container">
                <table id="moviesTable">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Genre</th>
                            <th>Director</th>
                            <th>Year</th>
                            <th>Duration</th>
                            <th>Rating</th>
                            <th>Description</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="moviesTableBody">
                        <tr><td colspan="8" style="text-align: center; color: #999;">Loading movies...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>&copy; 2026 Movie Library. All rights reserved.</p>
    </footer>

    <script src="/movies.js"></script>
</body>

</html>